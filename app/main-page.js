var ui_1 = require("ui");
var color_1 = require("color");
var utils = require("utils/utils");
var balls_1 = require("./balls");
var Physics = require("./physics/physicsjs-full");
var nsRenderer = require("./physics/ns-renderer");
var SCENE_WIDTH = 300;
var SCENE_HEIGHT = 400;
var DENSITY;
var DROP_SPOT_SIZE = 20;
var selectedBall;
var selectedDropSpot;
var initialized = false;
var shareBtn;
var star;
var dropSpots = [
    { x: 120, y: 180 },
    { x: 190, y: 190 },
    { x: 100, y: 280 },
    { x: 210, y: 290 }
];
var ballsWithChains = [
    { anchorX: 30, anchorY: 30, ballX: 20, ballY: 80, image: "~/images/ns-logo.png" },
    { anchorX: 70, anchorY: 30, ballX: 60, ballY: 80, image: "~/images/kendo-ui-logo.png" },
    { anchorX: 230, anchorY: 30, ballX: 240, ballY: 80, image: "~/images/telerik-logo.png" },
    { anchorX: 270, anchorY: 30, ballX: 280, ballY: 80, image: "~/images/progress-logo.png" },
];
// Event handler for Page "loaded" event attached in main-page.xml
function pageLoaded(args) {
    DENSITY = utils.layout.getDisplayDensity();
    var page = args.object;
    var container = page.getViewById("container");
    var metaText = page.getViewById("meta");
    star = page.getViewById("star");
    shareBtn = page.getViewById("btn-share");
    setTimeout(function () {
        initWrold(container, metaText);
    }, 200);
}
exports.pageLoaded = pageLoaded;
function addDropSpots(container) {
    for (var _i = 0; _i < dropSpots.length; _i++) {
        var dropSpot = dropSpots[_i];
        var img = new ui_1.Image();
        img.width = DROP_SPOT_SIZE;
        img.height = DROP_SPOT_SIZE;
        img.translateX = dropSpot.x - DROP_SPOT_SIZE / 2;
        img.translateY = dropSpot.y - DROP_SPOT_SIZE / 2;
        img.src = "~/images/anchor.png";
        img.stretch = "aspectFit";
        dropSpot.view = img;
        dropSpot.pos = new Physics.vector(dropSpot.x, dropSpot.y);
        container.addChild(img);
    }
}
function adjustToContainerSize(container) {
    var width = container.getMeasuredWidth() / DENSITY;
    var height = container.getMeasuredHeight() / DENSITY;
    var offsetX = (width - SCENE_WIDTH) / 2;
    var offsetY = (height - SCENE_HEIGHT - 60) / 2; // 60 - hieght of the share button
    container.width = width;
    container.height = height;
    for (var _i = 0; _i < dropSpots.length; _i++) {
        var dropSpot = dropSpots[_i];
        dropSpot.x += offsetX;
        dropSpot.y += offsetY;
    }
    for (var _a = 0; _a < ballsWithChains.length; _a++) {
        var bwc = ballsWithChains[_a];
        bwc.anchorX += offsetX;
        bwc.anchorY += offsetY;
        bwc.ballX += offsetX;
        bwc.ballY += offsetY;
    }
}
function initWrold(container, metaText) {
    if (initialized) {
        return;
    }
    initialized = true;
    adjustToContainerSize(container);
    addDropSpots(container);
    balls_1.initPhysicsWorld(container, metaText, ballsWithChains);
}
function getTouchPosition(args) {
    var result;
    if (args.android) {
        result = new Physics.vector(args.android.current.getX() / DENSITY, args.android.current.getY() / DENSITY);
    }
    else if (args.ios) {
        var pos = args.ios.locationInView(args.object.ios);
        result = new Physics.vector(pos.x, pos.y);
    }
    return result;
}
function onPan(args) {
    var touch = getTouchPosition(args);
    if (!touch) {
        return;
    }
    if (args.state === 1) {
        for (var _i = 0; _i < ballsWithChains.length; _i++) {
            var bwc = ballsWithChains[_i];
            if (touch.dist(bwc.anchorRef.state.pos) < 20) {
                startDragging(bwc);
                break;
            }
        }
    }
    else if (args.state === 3 && selectedBall) {
        endDragging();
    }
    if (selectedBall) {
        drag(touch);
    }
}
exports.onPan = onPan;
function startDragging(ball) {
    selectedBall = ball;
    selectedBall.anchorRef.view.scaleX = 2;
    selectedBall.anchorRef.view.scaleY = 2;
    var unfinish = false;
    dropSpots.forEach(function (spot) {
        if (spot.ball === selectedBall) {
            spot.ball = undefined;
            unfinish = true;
        }
    });
    if (unfinish) {
        animateButton(false);
    }
}
function endDragging() {
    if (selectedDropSpot) {
        selectedDropSpot.view.scaleX = 1;
        selectedDropSpot.view.scaleY = 1;
        selectedDropSpot.ball = selectedBall;
    }
    selectedBall.anchorRef.view.scaleX = 1;
    selectedBall.anchorRef.view.scaleY = 1;
    selectedBall = undefined;
    selectedDropSpot = undefined;
    if (dropSpots.every(function (spot) { return !!spot.ball; })) {
        animateStar();
        animateButton(true);
    }
}
function drag(touch) {
    for (var _i = 0; _i < dropSpots.length; _i++) {
        var dropSpot = dropSpots[_i];
        if (dropSpot.ball) {
            //slot taken - move on;
            continue;
        }
        if (touch.dist(dropSpot.pos) < 10) {
            selectedDropSpot = dropSpot;
            selectedDropSpot.view.scaleX = 2.2;
            selectedDropSpot.view.scaleY = 2.2;
            touch.x = dropSpot.x;
            touch.y = dropSpot.y;
        }
        else {
            dropSpot.view.scaleX = 1;
            dropSpot.view.scaleY = 1;
            if (selectedDropSpot === dropSpot) {
                selectedDropSpot = undefined;
            }
        }
    }
    selectedBall.anchorRef.state.pos.set(touch.x, touch.y);
}
function onShare() {
    console.log("Share tapped !!!");
    // Todo use screenshot && social share plugins to share
}
exports.onShare = onShare;
var animating = false;
function onStarTap(args) {
    animateStar();
}
exports.onStarTap = onStarTap;
function animateStar() {
    if (animating) {
        return;
    }
    animating = true;
    star.animate({
        rotate: 720,
        duration: 1500,
        curve: "easeInOut"
    }).then(function () {
        star.rotate = 0;
        animating = false;
    });
}
function animateButton(completed) {
    var color = new color_1.Color(completed ? "#55acee" : "#808080");
    shareBtn.animate({ backgroundColor: color });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi1wYWdlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibWFpbi1wYWdlLnRzIl0sIm5hbWVzIjpbInBhZ2VMb2FkZWQiLCJhZGREcm9wU3BvdHMiLCJhZGp1c3RUb0NvbnRhaW5lclNpemUiLCJpbml0V3JvbGQiLCJnZXRUb3VjaFBvc2l0aW9uIiwib25QYW4iLCJzdGFydERyYWdnaW5nIiwiZW5kRHJhZ2dpbmciLCJkcmFnIiwib25TaGFyZSIsIm9uU3RhclRhcCIsImFuaW1hdGVTdGFyIiwiYW5pbWF0ZUJ1dHRvbiJdLCJtYXBwaW5ncyI6IkFBR0EsbUJBQStELElBQUksQ0FBQyxDQUFBO0FBQ3BFLHNCQUFvQixPQUFPLENBQUMsQ0FBQTtBQUU1QixJQUFPLEtBQUssV0FBVyxhQUFhLENBQUMsQ0FBQztBQUV0QyxzQkFBOEMsU0FBUyxDQUFDLENBQUE7QUFFeEQsSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUE7QUFDakQsSUFBSSxVQUFVLEdBQUcsT0FBTyxDQUFDLHVCQUF1QixDQUFDLENBQUM7QUFFbEQsSUFBSSxXQUFXLEdBQVcsR0FBRyxDQUFDO0FBQzlCLElBQUksWUFBWSxHQUFXLEdBQUcsQ0FBQztBQUMvQixJQUFJLE9BQWUsQ0FBQztBQUVwQixJQUFJLGNBQWMsR0FBVyxFQUFFLENBQUM7QUFFaEMsSUFBSSxZQUEyQixDQUFDO0FBQ2hDLElBQUksZ0JBQTBCLENBQUM7QUFFL0IsSUFBSSxXQUFXLEdBQUcsS0FBSyxDQUFDO0FBQ3hCLElBQUksUUFBZ0IsQ0FBQztBQUNyQixJQUFJLElBQVcsQ0FBQztBQWdCaEIsSUFBSSxTQUFTLEdBQW9CO0lBQzdCLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFO0lBQ2xCLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFO0lBQ2xCLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxF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