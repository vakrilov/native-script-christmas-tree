var Physics = require("./physics/physicsjs-full");
var nsRenderer = require("./physics/ns-renderer");
var initialized = false;
// Event handler for Page "loaded" event attached in main-page.xml
function pageLoaded(args) {
    var page = args.object;
    var container = page.getViewById("container");
    var metaText = page.getViewById("meta");
    initWrold(container, metaText);
}
exports.pageLoaded = pageLoaded;
function initWrold(container, metaText) {
    if (initialized) {
        return;
    }
    initialized = true;
    var WIDTH = 300; //screen.mainScreen.widthDIPs;
    var HEIGHT = 400; //screen.mainScreen.heightDIPs - 60;
    console.log("w: " + WIDTH + " h: " + HEIGHT);
    // Get the event sender
    container.width = WIDTH;
    container.height = HEIGHT;
    var world = Physics();
    world.add(Physics.body('circle', {
        x: 50,
        y: 60,
        vx: .2,
        radius: 30,
        mass: 9
    }));
    world.add(Physics.body('circle', {
        x: 30,
        y: 60,
        radius: 10,
        mass: 1
    }));
    world.add(Physics.body('circle', {
        x: 70,
        y: 20,
        vx: -0.1,
        radius: 20,
        mass: 4
    }));
    var renderer = Physics.renderer('ns', {
        container: container,
        metaText: metaText,
        width: WIDTH,
        height: HEIGHT,
        meta: true
    });
    world.add([
        Physics.behavior('edge-collision-detection', { aabb: Physics.aabb(0, 0, WIDTH, HEIGHT) }),
        Physics.behavior('body-collision-detection'),
        Physics.behavior('body-impulse-response'),
        Physics.behavior('sweep-prune'),
        Physics.behavior('constant-acceleration'),
        renderer
    ]);
    world.on('step', function () {
        world.render();
    });
    Physics.util.ticker.on(function (t) {
        world.step(t);
    }).start();
    setInterval(function () {
        world.step(Date.now());
    }, 20);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi1wYWdlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibWFpbi1wYWdlLnRzIl0sIm5hbWVzIjpbInBhZ2VMb2FkZWQiLCJpbml0V3JvbGQiXSwibWFwcGluZ3MiOiJBQVNBLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFBO0FBQ2pELElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBRWxELElBQUksV0FBVyxHQUFHLEtBQUssQ0FBQztBQUN4QixrRUFBa0U7QUFDbEUsb0JBQTJCLElBQTBCO0lBQ2pEQSxJQUFJQSxJQUFJQSxHQUFlQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQTtJQUVuQ0EsSUFBSUEsU0FBU0EsR0FBZUEsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0E7SUFDMURBLElBQUlBLFFBQVFBLEdBQWFBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBO0lBRWxEQSxTQUFTQSxDQUFDQSxTQUFTQSxFQUFFQSxRQUFRQSxDQUFDQSxDQUFDQTtBQUNuQ0EsQ0FBQ0E7QUFQZSxrQkFBVSxhQU96QixDQUFBO0FBRUQsbUJBQW1CLFNBQXFCLEVBQUUsUUFBa0I7SUFDeERDLEVBQUVBLENBQUFBLENBQUNBLFdBQVdBLENBQUNBLENBQUFBLENBQUNBO1FBQ1pBLE1BQU1BLENBQUNBO0lBQ1hBLENBQUNBO0lBQ0RBLFdBQVdBLEdBQUdBLElBQUlBLENBQUNBO0lBRW5CQSxJQUFJQSxLQUFLQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSw4QkFBOEJBO0lBQy9DQSxJQUFJQSxNQUFNQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxvQ0FBb0NBO0lBQ3REQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxLQUFLQSxHQUFHQSxLQUFLQSxHQUFHQSxNQUFNQSxHQUFHQSxNQUFNQSxDQUFDQSxDQUFDQTtJQUM3Q0EsdUJBQXVCQTtJQUV2QkEsU0FBU0EsQ0FBQ0EsS0FBS0EsR0FBR0EsS0FBS0EsQ0FBQ0E7SUFDeEJBLFNBQVNBLENBQUNBLE1BQU1BLEdBQUdBLE1BQU1BLENBQUNBO0lBRTFCQSxJQUFJQSxLQUFLQSxHQUFHQSxPQUFPQSxFQUFFQSxDQUFDQTtJQUV0QkEsS0FBS0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsRUFBRUE7UUFDN0JBLENBQUNBLEVBQUVBLEVBQUVBO1FBQ0xBLENBQUNBLEVBQUVBLEVBQUVBO1FBQ0xBLEVBQUVBLEVBQUVBLEVBQUVBO1FBQ05BLE1BQU1BLEVBQUVBLEVBQUVBO1FBQ1ZBLElBQUlBLEVBQUVBLENBQUNBO0tBQ1ZBLENBQUNBLENBQUNBLENBQUNBO0lBRUpBLEtBQUtBLENBQUNBLEdBQUdBLENBQUNBLE9BQU9BLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLEVBQUVBO1FBQzdCQSxDQUFDQSxFQUFFQSxFQUFFQTtRQUNMQSxDQUFDQSxFQUFFQSxFQUFFQTtRQUNMQSxNQUFNQSxFQUFFQSxFQUFFQTtRQUNWQSxJQUFJQSxFQUFFQSxDQUFDQTtLQUNWQSxDQUFDQSxDQUFDQSxDQUFDQTtJQUdKQSxLQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxPQUFPQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxFQUFFQTtRQUM3QkEsQ0FBQ0EsRUFBRUEsRUFBRUE7UUFDTEEsQ0FBQ0EsRUFBRUEsRUFBRUE7UUFDTEEsRUFBRUEsRUFBRUEsQ0FBQ0EsR0FBR0E7UUFDUkEsTUFBTUEsRUFBRUEsRUFBRUE7UUFDVkEsSUFBSUEsRUFBRUEsQ0FBQ0E7S0FDVkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFFSkEsSUFBSUEsUUFBUUEsR0FBR0EsT0FBT0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsSUFBSUEsRUFBRUE7UUFDbENBLFNBQVNBLEVBQUVBLFNBQVNBO1FBQ3BCQSxRQUFRQSxFQUFFQSxRQUFRQTtRQUNsQkEsS0FBS0EsRUFBRUEsS0FBS0E7UUFDWkEsTUFBTUEsRUFBRUEsTUFBTUE7UUFDZEEsSUFBSUEsRUFBRUEsSUFBSUE7S0FDYkEsQ0FBQ0EsQ0FBQ0E7SUFFSEEsS0FBS0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDTkEsT0FBT0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsMEJBQTBCQSxFQUFFQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxFQUFFQSxLQUFLQSxFQUFFQSxNQUFNQSxDQUFDQSxFQUFFQSxDQUFDQTtRQUN6RkEsT0FBT0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsMEJBQTBCQSxDQUFDQTtRQUM1Q0EsT0FBT0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsdUJBQXVCQSxDQUFDQTtRQUN6Q0EsT0FBT0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsYUFBYUEsQ0FBQ0E7UUFDL0JBLE9BQU9BLENBQUNBLFFBQVFBLENBQUNBLHVCQUF1QkEsQ0FBQ0E7UUFDekNBLFFBQVFBO0tBQ1hBLENBQUNBLENBQUNBO0lBRUhBLEtBQUtBLENBQUNBLEVBQUVBLENBQUNBLE1BQU1BLEVBQUVBO1FBQ2IsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ25CLENBQUMsQ0FBQ0EsQ0FBQ0E7SUFHSEEsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsVUFBU0EsQ0FBQ0E7UUFDN0IsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsQixDQUFDLENBQUNBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBO0lBRVhBLFdBQVdBLENBQUNBO1FBQ1JBLEtBQUtBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLEVBQUVBLENBQUNBLENBQUNBO0lBQzNCQSxDQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxDQUFDQTtBQUNYQSxDQUFDQSJ9